{"ast":null,"code":"\n// import axios from 'axios';\n// const RAZORPAY_KEY = 'rzp_test_qUtLOVt2Ge3dFM';\n\n// // Verify OTP and get a bearer token\n// export const verifyOtpAndGetToken = async () => {\n//   try {\n//     const response = await axios.post('https://api.testbuddy.live/v1/auth/verifyotp', {\n//       mobile: '+919098989999', // Replace with the correct mobile number\n//       otp: '8899', // Replace with the correct OTP\n//     });\n\n//     const token = response.data.token;\n//     console.log('Generated Bearer Token: ', token);\n//     return token;\n//   } catch (error) {\n//     console.error('Error verifying OTP:', error.response ? error.response.data : error.message);\n//     throw error;\n//   }\n// };\n\n// // Load Razorpay script dynamically\n// const loadRazorpayScript = () => {\n//   return new Promise((resolve, reject) => {\n//     if (window.Razorpay) {\n//       resolve();\n//       return;\n//     }\n\n//     const script = document.createElement('script');\n//     script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n//     script.onload = () => resolve();\n//     script.onerror = () => reject('Failed to load Razorpay script');\n//     document.body.appendChild(script);\n//   });\n// };\n\n// // Fetch Razorpay key using the token\n// export const fetchRazorpayKey = async (token) => {\n//   try {\n//     const response = await axios.post('https://api.testbuddy.live/v1/payment/key', {}, {\n//       headers: {\n//         Authorization: `Bearer ${token}`,\n//       },\n//     });\n//     return response.data.key; // Ensure 'key' is the correct field\n//   } catch (error) {\n//     console.error('Error fetching Razorpay key:', error.response ? error.response.data : error.message);\n//     throw error;\n//   }\n// };\n\n// // Create an order\n// export const createOrder = async (token, packageId, pricingId, finalAmount, couponCode) => {\n//   try {\n//     const response = await axios.post(\n//       'https://api.testbuddy.live/v1/order/create',\n//       {\n//         packageId,\n//         pricingId,\n//         finalAmount,\n//         couponCode,\n//       },\n//       {\n//         headers: {\n//           Authorization: `Bearer ${token}`,\n//         },\n//       }\n//     );\n//     return response.data._id; // Ensure '_id' is the correct field for the transaction ID\n//   } catch (error) {\n//     console.error('Error creating order:', error.response ? error.response.data : error.message);\n//     throw error;\n//   }\n// };\n\n// // Initiate payment using Razorpay\n// export const initiatePayment = async (orderId, razorpayKey, verifyOrder) => {\n//   try {\n//     const options = {\n//       key: razorpayKey || RAZORPAY_KEY, // Use the fetched Razorpay key\n//       amount: 44100, // Amount in paise (e.g., 441.00 INR)\n//       currency: 'INR',\n//       name: 'Your Company Name',\n//       description: 'Test Transaction',\n//       order_id: orderId,\n//       handler: async (response) => {\n//         try {\n//           await verifyOrder(response.razorpay_payment_id, response.razorpay_signature, orderId);\n//           alert('Payment Successful!');\n//         } catch (error) {\n//           alert('Payment Verification Failed!');\n//         }\n//       },\n//       prefill: {\n//         name: 'John Doe',\n//         email: 'john.doe@example.com',\n//         contact: '9999999999',\n//       },\n//     };\n\n//     await loadRazorpayScript(); \n//     const rzp = new window.Razorpay(options);\n//     rzp.open();\n//   } catch (error) {\n//     console.error('Error initiating payment:', error.message);\n//     alert('Payment initiation failed!');\n//   }\n// };\n\n// // Verify order payment details\n// export const verifyOrder = async (token, razorpayPaymentId, razorpaySignature, transactionId) => {\n//     try {\n//       const response = await axios.post(\n//         'https://api.testbuddy.live/v1/order/verify',\n//         {\n//           transactionId,\n//           razorpayPaymentId,\n//           razorpaySignature,\n//         },\n//         {\n//           headers: {\n//             Authorization: `Bearer ${token}`,\n//           },\n//         }\n//       );\n//       console.log('Order Verification Response:', response.data);\n//       return response.data;\n//     } catch (error) {\n//       console.error('Error verifying order:', error.response ? error.response.data : error.message);\n//       throw error;\n//     }\n//   };","map":{"version":3,"names":[],"sources":["C:/Users/prath/Desktop/react/razorpay-integration/src/api.js"],"sourcesContent":["\r\n// import axios from 'axios';\r\n// const RAZORPAY_KEY = 'rzp_test_qUtLOVt2Ge3dFM';\r\n\r\n// // Verify OTP and get a bearer token\r\n// export const verifyOtpAndGetToken = async () => {\r\n//   try {\r\n//     const response = await axios.post('https://api.testbuddy.live/v1/auth/verifyotp', {\r\n//       mobile: '+919098989999', // Replace with the correct mobile number\r\n//       otp: '8899', // Replace with the correct OTP\r\n//     });\r\n\r\n//     const token = response.data.token;\r\n//     console.log('Generated Bearer Token: ', token);\r\n//     return token;\r\n//   } catch (error) {\r\n//     console.error('Error verifying OTP:', error.response ? error.response.data : error.message);\r\n//     throw error;\r\n//   }\r\n// };\r\n\r\n// // Load Razorpay script dynamically\r\n// const loadRazorpayScript = () => {\r\n//   return new Promise((resolve, reject) => {\r\n//     if (window.Razorpay) {\r\n//       resolve();\r\n//       return;\r\n//     }\r\n\r\n//     const script = document.createElement('script');\r\n//     script.src = 'https://checkout.razorpay.com/v1/checkout.js';\r\n//     script.onload = () => resolve();\r\n//     script.onerror = () => reject('Failed to load Razorpay script');\r\n//     document.body.appendChild(script);\r\n//   });\r\n// };\r\n\r\n// // Fetch Razorpay key using the token\r\n// export const fetchRazorpayKey = async (token) => {\r\n//   try {\r\n//     const response = await axios.post('https://api.testbuddy.live/v1/payment/key', {}, {\r\n//       headers: {\r\n//         Authorization: `Bearer ${token}`,\r\n//       },\r\n//     });\r\n//     return response.data.key; // Ensure 'key' is the correct field\r\n//   } catch (error) {\r\n//     console.error('Error fetching Razorpay key:', error.response ? error.response.data : error.message);\r\n//     throw error;\r\n//   }\r\n// };\r\n\r\n// // Create an order\r\n// export const createOrder = async (token, packageId, pricingId, finalAmount, couponCode) => {\r\n//   try {\r\n//     const response = await axios.post(\r\n//       'https://api.testbuddy.live/v1/order/create',\r\n//       {\r\n//         packageId,\r\n//         pricingId,\r\n//         finalAmount,\r\n//         couponCode,\r\n//       },\r\n//       {\r\n//         headers: {\r\n//           Authorization: `Bearer ${token}`,\r\n//         },\r\n//       }\r\n//     );\r\n//     return response.data._id; // Ensure '_id' is the correct field for the transaction ID\r\n//   } catch (error) {\r\n//     console.error('Error creating order:', error.response ? error.response.data : error.message);\r\n//     throw error;\r\n//   }\r\n// };\r\n\r\n// // Initiate payment using Razorpay\r\n// export const initiatePayment = async (orderId, razorpayKey, verifyOrder) => {\r\n//   try {\r\n//     const options = {\r\n//       key: razorpayKey || RAZORPAY_KEY, // Use the fetched Razorpay key\r\n//       amount: 44100, // Amount in paise (e.g., 441.00 INR)\r\n//       currency: 'INR',\r\n//       name: 'Your Company Name',\r\n//       description: 'Test Transaction',\r\n//       order_id: orderId,\r\n//       handler: async (response) => {\r\n//         try {\r\n//           await verifyOrder(response.razorpay_payment_id, response.razorpay_signature, orderId);\r\n//           alert('Payment Successful!');\r\n//         } catch (error) {\r\n//           alert('Payment Verification Failed!');\r\n//         }\r\n//       },\r\n//       prefill: {\r\n//         name: 'John Doe',\r\n//         email: 'john.doe@example.com',\r\n//         contact: '9999999999',\r\n//       },\r\n//     };\r\n\r\n//     await loadRazorpayScript(); \r\n//     const rzp = new window.Razorpay(options);\r\n//     rzp.open();\r\n//   } catch (error) {\r\n//     console.error('Error initiating payment:', error.message);\r\n//     alert('Payment initiation failed!');\r\n//   }\r\n// };\r\n\r\n// // Verify order payment details\r\n// export const verifyOrder = async (token, razorpayPaymentId, razorpaySignature, transactionId) => {\r\n//     try {\r\n//       const response = await axios.post(\r\n//         'https://api.testbuddy.live/v1/order/verify',\r\n//         {\r\n//           transactionId,\r\n//           razorpayPaymentId,\r\n//           razorpaySignature,\r\n//         },\r\n//         {\r\n//           headers: {\r\n//             Authorization: `Bearer ${token}`,\r\n//           },\r\n//         }\r\n//       );\r\n//       console.log('Order Verification Response:', response.data);\r\n//       return response.data;\r\n//     } catch (error) {\r\n//       console.error('Error verifying order:', error.response ? error.response.data : error.message);\r\n//       throw error;\r\n//     }\r\n//   };\r\n  "],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}